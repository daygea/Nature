<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature Speaks</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 <style>
        .odusign{
            font-family: Arial, sans-serif;
            text-align: center;
/*            margin-top: 20vh;*/
            font-size: 20px;
        }
        .numerology{
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 10vh;
            font-size: 20px;
        }
        h1 {
            margin-bottom: 20px;
        }

     #birthdate-box {
                margin-bottom: 10px;
            }

       input[type="date"] {
            width: 80%;
            max-width: 250px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }    

        button {
            font-size: 16px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #f9f9f9;
            font-size: 14px;
            color: #333;
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
        }

        #random-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #random-btn:hover {
            background-color: #45a049;
        }

    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 style="text-align: center;">Nature Speaks</h1>

        <div class="row">
            <div id="configurationResult" class="col-sm-3 odusign">
            </div>
            <div class="col-sm-6">
                <h3 style="text-align: center;">Enter Your Divination Details</h3>
                <label for="mainCast">Odu Ifa</label>
                <select id="mainCast" class="form-control"></select>
                <br>

                <label for="orientation">Orientation (Ire / Ayewo)</label>
                <select id="orientation" onchange="updateSpecificOrientation()" class="form-control">
                    <option value="Positive">Ire</option>
                    <option value="Negative">Ayewo</option>
                </select>
                <br>

                <label for="specificOrientation">Specific Orientation</label>
                <select id="specificOrientation" class="form-control"></select>
                <br>

                <label for="solution">Solution (Ebo / Adimu)</label>
                <select id="solution" onchange="updateSolutionDetails()" class="form-control">
                    <option value="Ebo" selected>Ebo</option>
                    <option value="Adimu">Adimu</option>
                </select>
                <br>

                <label for="solutionDetails">Solution Details</label>
                <select id="solutionDetails" class="form-control"></select>
                <br>

                <button onclick="performUserDivination()" class="btn btn-md btn-danger">Reveal Message</button>

                <div id="divinationResult">
                    <!-- Result will be displayed here -->
                </div>
            </div>
            <div class="col-sm-3 numerology">
                <p><b>Enter your birth date.</b></p>
                    <div id="birthdate-box">
                        <input type="date" id="birthdate" /><br/><br/>
                        <button class="btn btn-md btn-primary" id="determine-btn">Get Meaning</button>
                    </div>

                    <div id="result"></div>
            </div>
        </div>
        <script type="text/javascript" src="oduMessages.js"></script>
        <!-- <script type="text/javascript" src="numerology.js"></script> -->
    <script>
        
        // Base Odùs
        const baseOdus = {
            "Ejiogbe": ["|", "|", "|", "|"],
            "Oyeku Meji": ["||", "||", "||", "||"],
            "Iwori Meji": ["||", "|", "|", "||"],
            "Idi Meji": ["|", "||", "||", "|"],
            "Irosun Meji": ["|", "|", "||", "||"],
            "Owonrin Meji": ["||", "||", "|", "|"],
            "Obara Meji": ["|", "||", "||", "||"],
            "Okanran Meji": ["||", "||", "||", "|"],
            "Ogunda Meji": ["|", "|", "|", "||"],
            "Osa Meji": ["||", "|", "|", "|"],
            "Ika Meji": ["||", "|", "||", "||"],
            "Oturupon Meji": ["||", "||", "|", "||"],
            "Otura Meji": ["|", "||", "|", "|"],
            "Irete Meji": ["|", "|", "||", "|"],
            "Ose Meji": ["|", "||", "|", "||"],
            "Ofun Meji": ["||", "|", "||", "|"]
        };

        // Generate all 256 Odù combinations
        const generateOduCombinations = () => {
            const baseOduNames = Object.keys(baseOdus);
            const allOdus = [...baseOduNames];
            baseOduNames.forEach(firstOdu => {
                baseOduNames.forEach(secondOdu => {
                    if (firstOdu !== secondOdu) {
                        let firstName = firstOdu === "Ejiogbe" ? "Ogbe" : firstOdu.split(" ")[0];
                        let secondName = secondOdu === "Ejiogbe" ? "Ogbe" : secondOdu.split(" ")[0];
                        allOdus.push(`${firstName} ${secondName}`);
                    }
                });
            });
            return allOdus;
        };

        const allOdus = generateOduCombinations();

        // Populate dropdowns
        const populateDropdown = (dropdown, options) => {
            dropdown.innerHTML = ""; // Clear existing options
            options.forEach(option => {
                const optElement = document.createElement("option");
                optElement.value = option;
                optElement.textContent = option;
                dropdown.appendChild(optElement);
            });
        };

        const populateDropdowns = () => {
            const mainCastDropdown = document.getElementById("mainCast");
            populateDropdown(mainCastDropdown, allOdus);
            updateSpecificOrientation();
            updateSolutionDetails(); // Populate solution details on page load
        };

        // Check if oduMessages has data for the selected mainCast, fallback if not

        const getOduMessageData = (mainCast, orientation, specificOrientation, solution, specificSolution) => {
            const orientationData = oduMessages[mainCast]?.[orientation];
            const specificOrientationData = orientationData?.[specificOrientation];
            const solutionData = specificOrientationData?.[solution]?.[specificSolution];
            const messageData = orientationData?.[specificOrientation].Message;
            
            return {
                message: messageData || "No message available &",
                solutionInfo: solutionData || "no message available for the selected combination.",
                orientationMessage: orientationData?.Messages || "No general message available for this orientation.",
                specificOrientationMessage: specificOrientationData?.Message || "No message available for this specific orientation."
            };
        };

        const updateSpecificOrientation = () => {
                const orientation = document.getElementById("orientation").value;
                const specificOrientationDropdown = document.getElementById("specificOrientation");
                const mainCast = document.getElementById("mainCast").value;

                // Use fallback options if no data exists in `oduMessages`
                const defaultOptions =
                    orientation === "Positive"
                        ? ["Aiku", "Aje", "Isegun", "Igbale Ese", "Gbogbo Ire"]
                        : ["Iku", "Arun", "Ejo", "Ofo", "Okutagbunilese"];
                const options =
                    oduMessages[mainCast]?.[orientation] 
                        ? Object.keys(oduMessages[mainCast][orientation])
                        : defaultOptions;

                populateDropdown(specificOrientationDropdown, options);
            };

             const updateSolutionDetails = () => {
                const solution = document.getElementById("solution").value;
                const solutionDetailsDropdown = document.getElementById("solutionDetails");
                const mainCast = document.getElementById("mainCast").value;

                // Use fallback options if no data exists in `oduMessages`
                const defaultSolutionDetails =
                    solution === "Ebo"
                        ? ["Akoru", "Esha"]
                        : ["Ori", "Osha", "Eegun", "Ifa"];
                const details =
                    oduMessages[mainCast]?.Solution?.[solution] 
                        ? oduMessages[mainCast].Solution[solution]
                        : defaultSolutionDetails;

                populateDropdown(solutionDetailsDropdown, details);
            };

        const performUserDivination = () => {
        const mainCast = document.getElementById("mainCast").value;
        const orientation = document.getElementById("orientation").value;
        const specificOrientation = document.getElementById("specificOrientation").value;
        const solution = document.getElementById("solution").value;
        const solutionDetails = document.getElementById("solutionDetails").value;

        // const message = getOduMessageData(mainCast, orientation, specificOrientation, solution, solutionDetails);

        const { message, solutionInfo, orientationMessage, specificOrientationMessage } = 
        getOduMessageData(mainCast, orientation, specificOrientation, solution, solutionDetails);

        const orisha = oduMessages[mainCast]?.Orisha || "No Orisha information available.";
        const taboo = oduMessages[mainCast]?.Taboo || "No Taboo information available.";
        const names = oduMessages[mainCast]?.Names || "No Names information available.";
        const occupation = oduMessages[mainCast]?.Occupation || "No Occupation information available.";
        const credit = oduMessages[mainCast]?.Credit || "No Credit information available.";

        // Map orientation to descriptive text
        const orientationText = orientation === "Positive" ? "Ire" : "Ayewo";

        const resultElement = document.getElementById("divinationResult");
        resultElement.innerHTML = `
            <h1 style="text-align: center;">Divination Result</h1>
            <h3 style="text-align: center;">${mainCast}, ${orientationText} (${specificOrientation}), ${solution} ${solutionDetails}</h3>
            <p><strong>Message:</strong> ${message} ${solutionInfo} </p>
            <p><strong>Orisha:</strong> ${orisha}</p>
            <p><strong>Taboo:</strong> ${taboo}</p>
            <p><strong>Names:</strong> ${names}</p>
            <p><strong>Occupation:</strong> ${occupation}</p>
            <p><strong>Credit:</strong> ${credit}</p>
        `;
        displayConfiguration(mainCast);
    };

    const displayConfiguration = (oduName) => {
            const configurationElement = document.getElementById("configurationResult");
            let configHTML = "";

            if (baseOdus[oduName]) {
                // For the first 16 Odùs
                const config = baseOdus[oduName];
                configHTML = `<h1><b>Odu Ifa</b></h1>`;
                config.forEach(line => {
                    configHTML += `<p>&nbsp;&nbsp;${line} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ${line}</p>`;
                });
            } else {
                // For combinations like "Ogbe Oyeku"
                const parts = oduName.split(" ");
                const firstPart = parts[0] === "Ogbe" ? "Ejiogbe" : `${parts[0]} Meji`;
                const secondPart = parts[1] === "Ogbe" ? "Ejiogbe" : `${parts[1]} Meji`;

                const firstConfig = baseOdus[firstPart];
                const secondConfig = baseOdus[secondPart];

                if (firstConfig && secondConfig) {
                    configHTML = `<h1><b>Odu Ifa</b></h1>`;
                    firstConfig.forEach((line, index) => {
                        configHTML += `<p>&nbsp;&nbsp;${secondConfig[index]} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ${line}</p>`;
                    });
                } else {
                    configHTML = `<h2>Odu</h2><p>Configuration not found for ${oduName}.</p>`;
                }
            }

            configurationElement.innerHTML = configHTML;

        };



        // Initialize on page load
        window.onload = populateDropdowns;

        // Numerology meanings based on single-digit life path numbers
        const numerologyMeanings = {
            1: "Associated with beginnings, leadership, and creativity. You are ambitious and thrive when taking initiative. Ensure to start new things. You will travel alot. Take care of your head. Pray in water and use to rinse your head on the floor. Don't let your head hit the floor or anything. Ruled by the Sun. Reflects confidence, energy, and self-expression. Associated with Aries' fiery determination. ",
            2: "Symbolizes balance, duality, and transformation. You are diplomatic and seek harmony in relationships. Prepare to embrace blessings. Start something small and it will grow into fruition. Ruled by the Moon. Associated with emotions and intuition. Linked to Cancer's nurturing nature.",
            3: "Reflects communication, adaptability, and growth. You excel in communication and bring optimism to others. Get ready to embrace wealth. Ruled by Jupiter. Represents expansion and inspiration. Linked to Sagittarius' adventurous spirit.",
            4: "Represents stability, security, and structure. You are grounded and value structure in life. Ensure to stay low key. Don't plan travelling this period. Ruled by Saturn. Represents discipline and responsibility. Associated with Capricorn's practical outlook.",
            5: "Embodies freedom, exploration, and spiritual inquiry. You thrive in change and love to explore new possibilities. You will travel a lot. Be careful with divorce in your marriage. Ruled by Mercury. Represents quick thinking and versatility. Linked to Gemini's and Virgo's curious nature.",
            6: "Focuses on harmony, love, and nurturing. You are caring and seek to create a harmonious home. This is a time for enjoyment and throwing/ attending parties. Ruled by Venus. Represents love and beauty. Associated with Taurus' stability and Libra's balance.",
            7: "Tied to analysis, wisdom, and introspection. You are analytical and seek a deeper understanding of life. Be careful of prison and poison. Say more of positive things because the spirits are waiting to listen to you. Ruled by Neptune. Represents intuition and mysticism. Linked to Pisces' spiritual depth.",
            8: "Indicates ambition, power, and material success. You are ambitious and have strong leadership qualities. This number deals with Karma. This is the time of blessings and achievement for someone that is rightous else all this blessings will be in the dream. Don't keep your money with people for returns or investment. Ruled by Saturn. Reflects discipline and mastery. Often tied to Capricorn's drive for achievement",
            9: "Suggests humanitarianism, completion, and service. You are idealistic and seek to serve others. Avoid violent/conflict and take things easy to avoid disaster /destruction. Ruled by Mars. Represents passion and courage. Connected to Scorpio's transformative energy."
        };

         // Function to calculate the single-digit numerology number
        function getNumerologyNumber(dateString) {
            let digits = dateString.replace(/[^0-9]/g, ""); // Remove non-numeric characters
            let sum = digits.split("").reduce((acc, num) => acc + parseInt(num), 0);
            
            // Reduce to a single-digit number
            while (sum > 9) {
                sum = sum.toString().split("").reduce((acc, num) => acc + parseInt(num), 0);
            }
            
            return sum;
        }

        // Handle button click to determine the meaning
        document.getElementById("determine-btn").onclick = () => {
            const birthdate = document.getElementById("birthdate").value;
            const resultDiv = document.getElementById("result");

            if (!birthdate) {
                resultDiv.innerHTML = "<span style='color:red;'>Select your birth date.</span>";
                return;
            }

            // Get the single-digit numerology number
            const numerologyNumber = getNumerologyNumber(birthdate);

            // Display the result
            resultDiv.innerHTML = `
                <center><strong>Numerology No:</strong> ${numerologyNumber}</center><br/>
                ${numerologyMeanings[numerologyNumber]}
            `;
        };

    </script>

    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature Speaks</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 30px;
        }

        h1 {
            margin-bottom: 20px;
        }

        .calculator {
            display: grid;
            grid-template-columns: repeat(4, 50px);
            gap: 10px;
            justify-content: center;
        }

        .calculator button {
            padding: 15px;
            font-size: 18px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calculator button:hover {
            background-color: #ddd;
        }

        .calculator button.selected {
            background-color: red;
            color: white;
        }

        #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            display: inline-block;
            width: 80%;
            max-width: 400px;
            background-color: #f9f9f9;
            color: #333;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 style="text-align: center;">Nature Speaks</h1>

        <div class="row">
            <div id="configurationResult" class="col-sm-3">
            </div>
            <div class="col-sm-6">
                <h3 style="text-align: center;">Enter Your Divination Details</h3>
                <label for="mainCast">Odu Ifa</label>
                <select id="mainCast" class="form-control"></select>
                <br>

                <label for="orientation">Orientation (Ire / Ayewo)</label>
                <select id="orientation" onchange="updateSpecificOrientation()" class="form-control">
                    <option value="Positive">Ire</option>
                    <option value="Negative">Ayewo</option>
                </select>
                <br>

                <label for="specificOrientation">Specific Orientation</label>
                <select id="specificOrientation" class="form-control"></select>
                <br>

                <label for="solution">Solution (Ebo / Adimu)</label>
                <select id="solution" onchange="updateSolutionDetails()" class="form-control">
                    <option value="Ebo" selected>Ebo</option>
                    <option value="Adimu">Adimu</option>
                </select>
                <br>

                <label for="solutionDetails">Solution Details</label>
                <select id="solutionDetails" class="form-control"></select>
                <br>

                <button onclick="performUserDivination()" class="btn btn-md btn-danger">Reveal Message</button>

                <div id="divinationResult">
                    <!-- Result will be displayed here -->
                </div>
            </div>
            <div class="col-sm-3">
                <h3>Click on any number to reveal its meaning to you.</h3>
                <div class="calculator" id="calculator">
                    <!-- Buttons will be generated dynamically -->
                </div>
                <div id="result"></div>
            </div>
        </div>
        <script type="text/javascript" src="oduMessages.js"></script>
        <script type="text/javascript" src="numerology.js"></script>
    <script>
        
        // Base Odùs
        const baseOdus = {
            "Ejiogbe": ["|", "|", "|", "|"],
            "Oyeku Meji": ["||", "||", "||", "||"],
            "Iwori Meji": ["||", "|", "|", "||"],
            "Idi Meji": ["|", "||", "||", "|"],
            "Irosun Meji": ["|", "|", "||", "||"],
            "Owonrin Meji": ["||", "||", "|", "|"],
            "Obara Meji": ["|", "||", "||", "||"],
            "Okanran Meji": ["||", "||", "||", "|"],
            "Ogunda Meji": ["|", "|", "|", "||"],
            "Osa Meji": ["||", "|", "|", "|"],
            "Ika Meji": ["||", "|", "||", "||"],
            "Oturupon Meji": ["||", "||", "|", "||"],
            "Otura Meji": ["|", "||", "|", "|"],
            "Irete Meji": ["|", "|", "||", "|"],
            "Ose Meji": ["|", "||", "|", "||"],
            "Ofun Meji": ["||", "|", "||", "|"]
        };

        // Generate all 256 Odù combinations
        const generateOduCombinations = () => {
            const baseOduNames = Object.keys(baseOdus);
            const allOdus = [...baseOduNames];
            baseOduNames.forEach(firstOdu => {
                baseOduNames.forEach(secondOdu => {
                    if (firstOdu !== secondOdu) {
                        let firstName = firstOdu === "Ejiogbe" ? "Ogbe" : firstOdu.split(" ")[0];
                        let secondName = secondOdu === "Ejiogbe" ? "Ogbe" : secondOdu.split(" ")[0];
                        allOdus.push(`${firstName} ${secondName}`);
                    }
                });
            });
            return allOdus;
        };

        const allOdus = generateOduCombinations();

        // Populate dropdowns
        const populateDropdown = (dropdown, options) => {
            dropdown.innerHTML = ""; // Clear existing options
            options.forEach(option => {
                const optElement = document.createElement("option");
                optElement.value = option;
                optElement.textContent = option;
                dropdown.appendChild(optElement);
            });
        };

        const populateDropdowns = () => {
            const mainCastDropdown = document.getElementById("mainCast");
            populateDropdown(mainCastDropdown, allOdus);
            updateSpecificOrientation();
            updateSolutionDetails(); // Populate solution details on page load
        };

        // Check if oduMessages has data for the selected mainCast, fallback if not

        const getOduMessageData = (mainCast, orientation, specificOrientation, solution, specificSolution) => {
            const orientationData = oduMessages[mainCast]?.[orientation];
            const specificOrientationData = orientationData?.[specificOrientation];
            const solutionData = specificOrientationData?.[solution]?.[specificSolution];
            const messageData = orientationData?.[specificOrientation].Message;
            
            return {
                message: messageData || "No message available &",
                solutionInfo: solutionData || "no message available for the selected combination.",
                orientationMessage: orientationData?.Messages || "No general message available for this orientation.",
                specificOrientationMessage: specificOrientationData?.Message || "No message available for this specific orientation."
            };
        };

        const updateSpecificOrientation = () => {
                const orientation = document.getElementById("orientation").value;
                const specificOrientationDropdown = document.getElementById("specificOrientation");
                const mainCast = document.getElementById("mainCast").value;

                // Use fallback options if no data exists in `oduMessages`
                const defaultOptions =
                    orientation === "Positive"
                        ? ["Aiku", "Aje", "Isegun", "Igbale Ese", "Ire Gbogbo"]
                        : ["Iku", "Arun", "Ejo", "Ofo", "Okutagbunilese"];
                const options =
                    oduMessages[mainCast]?.[orientation] 
                        ? Object.keys(oduMessages[mainCast][orientation])
                        : defaultOptions;

                populateDropdown(specificOrientationDropdown, options);
            };

             const updateSolutionDetails = () => {
                const solution = document.getElementById("solution").value;
                const solutionDetailsDropdown = document.getElementById("solutionDetails");
                const mainCast = document.getElementById("mainCast").value;

                // Use fallback options if no data exists in `oduMessages`
                const defaultSolutionDetails =
                    solution === "Ebo"
                        ? ["Akoru", "Esha"]
                        : ["Ori", "Osha", "Eegun", "Ifa"];
                const details =
                    oduMessages[mainCast]?.Solution?.[solution] 
                        ? oduMessages[mainCast].Solution[solution]
                        : defaultSolutionDetails;

                populateDropdown(solutionDetailsDropdown, details);
            };

        const performUserDivination = () => {
        const mainCast = document.getElementById("mainCast").value;
        const orientation = document.getElementById("orientation").value;
        const specificOrientation = document.getElementById("specificOrientation").value;
        const solution = document.getElementById("solution").value;
        const solutionDetails = document.getElementById("solutionDetails").value;

        // const message = getOduMessageData(mainCast, orientation, specificOrientation, solution, solutionDetails);

        const { message, solutionInfo, orientationMessage, specificOrientationMessage } = 
        getOduMessageData(mainCast, orientation, specificOrientation, solution, solutionDetails);

        const orisha = oduMessages[mainCast]?.Orisha || "No Orisha information available.";
        const taboo = oduMessages[mainCast]?.Taboo || "No Taboo information available.";
        const names = oduMessages[mainCast]?.Names || "No Names information available.";
        const occupation = oduMessages[mainCast]?.Occupation || "No Occupation information available.";
        const credit = oduMessages[mainCast]?.Credit || "No Credit information available.";

        // Map orientation to descriptive text
        const orientationText = orientation === "Positive" ? "Ire" : "Ayewo";

        const resultElement = document.getElementById("divinationResult");
        resultElement.innerHTML = `
            <h1 style="text-align: center;">Divination Result</h1>
            <h3 style="text-align: center;">${mainCast}, ${orientationText} (${specificOrientation}), ${solution} ${solutionDetails}</h3>
            <p><strong>Message:</strong> ${message} ${solutionInfo} </p>
            <p><strong>Orisha:</strong> ${orisha}</p>
            <p><strong>Taboo:</strong> ${taboo}</p>
            <p><strong>Names:</strong> ${names}</p>
            <p><strong>Occupation:</strong> ${occupation}</p>
            <p><strong>Credit:</strong> ${credit}</p>
        `;
        displayConfiguration(mainCast);
    };

    const displayConfiguration = (oduName) => {
    const configurationElement = document.getElementById("configurationResult");
    let configHTML = "";

    if (baseOdus[oduName]) {
        // For the first 16 Odùs
        const config = baseOdus[oduName];
        configHTML = `<h2>Odu Ifa</h2>`;
        config.forEach(line => {
            configHTML += `<p>&nbsp;&nbsp;${line} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ${line}</p>`;
        });
    } else {
        // For combinations like "Ogbe Oyeku"
        const parts = oduName.split(" ");
        const firstPart = parts[0] === "Ogbe" ? "Ejiogbe" : `${parts[0]} Meji`;
        const secondPart = parts[1] === "Ogbe" ? "Ejiogbe" : `${parts[1]} Meji`;

        const firstConfig = baseOdus[firstPart];
        const secondConfig = baseOdus[secondPart];

        if (firstConfig && secondConfig) {
            configHTML = `<h2>Odu Ifa</h2>`;
            firstConfig.forEach((line, index) => {
                configHTML += `<p>&nbsp;&nbsp;${secondConfig[index]} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ${line}</p>`;
            });
        } else {
            configHTML = `<h2>Odu</h2><p>Configuration not found for ${oduName}.</p>`;
        }
    }

            configurationElement.innerHTML = configHTML;
        };

        // Initialize on page load
        window.onload = populateDropdowns;

        // Generate calculator buttons dynamically
        const calculatorDiv = document.getElementById("calculator");
        for (let i = 1; i <= 16; i++) {
            const button = document.createElement("button");
            button.textContent = i;
            button.onclick = () => displayMeaning(i, button);
            calculatorDiv.appendChild(button);
        }

        // Function to display Numerology and Astrological meaning and highlight the selected button
        function displayMeaning(number, selectedButton) {
            const resultDiv = document.getElementById("result");
            const meaning = numerologyMeanings[number];
            resultDiv.innerHTML = `
                <strong>Numerology Meaning:</strong> ${meaning.numerology}<br><br>
                <strong>Astrological Influence:</strong> ${meaning.astrology}
            `;
            resultDiv.style.color = "green";

            // Reset all buttons to default
            const buttons = calculatorDiv.querySelectorAll("button");
            buttons.forEach(button => button.classList.remove("selected"));

            // Highlight the selected button
            selectedButton.classList.add("selected");
        }

    </script>

    </div>
</body>
</html>
